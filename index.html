<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Kebakaran 2026</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b0f14;
  --card:#141925;
  --txt:#fff;
}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(180deg,#05070b,#0b0f14);
  color:var(--txt);
}
header{
  padding:15px;
  font-size:22px;
  font-weight:bold;
}
.months{
  display:flex;
  gap:6px;
  padding:0 15px 10px;
  flex-wrap:wrap;
}
.months button{
  background:#1a1f2e;
  border:none;
  color:#fff;
  padding:6px 12px;
  border-radius:20px;
  cursor:pointer;
}
.months button.active{
  background:#ff4d4d;
}

.grid{
  display:grid;
  gap:12px;
  padding:0 15px 15px;
}
.grid-6{grid-template-columns:repeat(6,1fr)}
.grid-3{grid-template-columns:repeat(3,1fr)}
.grid-1{grid-template-columns:1fr}

.card{
  background:linear-gradient(180deg,#151b2a,#0f1422);
  border-radius:14px;
  padding:14px;
  text-align:center;
  position:relative;
}
.card h4{margin:0;font-size:14px;opacity:.9}
.card span{
  font-size:30px;
  font-weight:bold;
  display:block;
  margin-top:6px;
}
.bar{
  height:4px;
  width:100%;
  position:absolute;
  bottom:0;left:0;
  border-radius:0 0 14px 14px;
}
.red{background:#ff4d4d}
.blue{background:#3fa9f5}
.green{background:#4caf50}
.orange{background:#ff9800}
.teal{background:#00bcd4}
.pink{background:#e91e63}
.purple{background:#9c27b0}
.yellow{background:#cddc39}

h3{
  margin:10px 15px 6px;
  font-weight:600;
}
</style>
</head>

<body>

<header>ðŸ”¥ DATA KEBAKARAN 2026</header>

<div class="months" id="bulan"></div>

<!-- COUNT KOTA -->
<div class="grid grid-6">
  <div class="card"><h4>Jakbar</h4><span id="jb">0</span><div class="bar red"></div></div>
  <div class="card"><h4>Jakpus</h4><span id="jp">0</span><div class="bar red"></div></div>
  <div class="card"><h4>Jaksel</h4><span id="js">0</span><div class="bar red"></div></div>
  <div class="card"><h4>Jaktim</h4><span id="jt">0</span><div class="bar red"></div></div>
  <div class="card"><h4>Jakut</h4><span id="ju">0</span><div class="bar red"></div></div>
  <div class="card"><h4>Total</h4><span id="total">0</span><div class="bar red"></div></div>
</div>

<h3>Jumlah Terdampak</h3>
<div class="grid grid-3">
  <div class="card"><h4>Rumah</h4><span id="rumah">0</span><div class="bar orange"></div></div>
  <div class="card"><h4>KK</h4><span id="kk">0</span><div class="bar blue"></div></div>
  <div class="card"><h4>Orang</h4><span id="orang">0</span><div class="bar green"></div></div>
</div>

<h3>Korban / Meninggal</h3>
<div class="grid grid-1">
  <div class="card"><h4>Total</h4><span id="korban">0</span><div class="bar red"></div></div>
</div>

<h3>Jumlah Pengungsian</h3>
<div class="grid grid-3">
  <div class="card"><h4>Total</h4><span id="pengTotal">0</span><div class="bar red"></div></div>
  <div class="card"><h4>Laki-laki</h4><span id="pengL">0</span><div class="bar teal"></div></div>
  <div class="card"><h4>Perempuan</h4><span id="pengP">0</span><div class="bar pink"></div></div>
</div>

<h3>Jumlah Pasien</h3>
<div class="grid grid-1">
  <div class="card"><h4>Total</h4><span id="pasien">0</span><div class="bar orange"></div></div>
</div>

<script>
const SHEET_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vS4JZD0cxRHeBcSJm0KZMXewwX19RWJL1GrNcn2ZQeyeQpVByaiIyt0_FCPEcaRMA/pubhtml";

const bulanNama=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"];
let bulanAktif=1;

const bulanDiv=document.getElementById("bulan");
bulanNama.forEach((b,i)=>{
  const btn=document.createElement("button");
  btn.textContent=b;
  if(i+1===bulanAktif) btn.classList.add("active");
  btn.onclick=()=>{
    document.querySelectorAll(".months button").forEach(x=>x.classList.remove("active"));
    btn.classList.add("active");
    bulanAktif=i+1;
    loadData();
  };
  bulanDiv.appendChild(btn);
});

function num(v){v=parseInt(v);return isNaN(v)?0:v}

function loadData(){
 let k={jb:0,jp:0,js:0,jt:0,ju:0,total:0};
 let d={rumah:0,kk:0,orang:0,korban:0,pengTotal:0,pengL:0,pengP:0,pasien:0};

 fetch(SHEET_URL).then(r=>r.text()).then(t=>{
  const doc=new DOMParser().parseFromString(t,"text/html");
  const rows=[...doc.querySelectorAll("table tr")].slice(1);

  rows.forEach(r=>{
    const c=[...r.children].map(td=>td.innerText.trim());
    if(!(c[3]||"").toLowerCase().includes("kebakaran")) return;

    const bln=new Date(c[1]).getMonth()+1;
    if(bln!==bulanAktif) return;

    const kota=(c[7]||"").toLowerCase();
    k.total++;
    if(kota.includes("barat"))k.jb++;
    else if(kota.includes("pusat"))k.jp++;
    else if(kota.includes("selatan"))k.js++;
    else if(kota.includes("timur"))k.jt++;
    else if(kota.includes("utara"))k.ju++;

    d.rumah+=num(c[12]);
    d.kk+=num(c[13]);
    d.orang+=num(c[14]);
    d.korban+=num(c[9]);
    d.pengTotal+=num(c[15]);
    d.pengL+=num(c[16]);
    d.pengP+=num(c[17]);
    d.pasien+=num(c[11]);
  });

  Object.entries({...k,...d}).forEach(([i,v])=>{
    const el=document.getElementById(i);
    if(el) el.textContent=v;
  });
 });
}

loadData();
</script>

</body>
</html>
