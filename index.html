<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard Data Kejadian Kebakaran 2026</title>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0f1115;
  color:#fff;
}
header{
  background:#151922;
  padding:16px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}
.container{
  padding:16px;
}
select{
  padding:6px 10px;
  font-size:14px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:12px;
  margin-top:16px;
}
.card{
  background:#1b2030;
  border-radius:8px;
  padding:14px;
}
.card h3{
  margin:0 0 6px;
  font-size:14px;
  color:#9aa4ff;
}
.card .value{
  font-size:26px;
  font-weight:bold;
}
.sub{
  font-size:12px;
  color:#aaa;
}
.footer{
  text-align:center;
  font-size:12px;
  color:#888;
  margin-top:20px;
}
</style>
</head>

<body>

<header>
  DATA KEJADIAN KEBAKARAN 2026
</header>

<div class="container">

<label>Pilih Bulan:</label>
<select id="bulan" onchange="loadData(this.value)">
  <option value="1">Januari</option>
  <option value="2">Februari</option>
  <option value="3">Maret</option>
  <option value="4">April</option>
  <option value="5">Mei</option>
  <option value="6">Juni</option>
  <option value="7">Juli</option>
  <option value="8">Agustus</option>
  <option value="9">September</option>
  <option value="10">Oktober</option>
  <option value="11">November</option>
  <option value="12">Desember</option>
</select>

<div class="grid">

<div class="card">
  <h3>Total Kejadian</h3>
  <div class="value" id="total">0</div>
</div>

<div class="card">
  <h3>Jakarta Barat</h3>
  <div class="value" id="jb">0</div>
</div>

<div class="card">
  <h3>Jakarta Pusat</h3>
  <div class="value" id="jp">0</div>
</div>

<div class="card">
  <h3>Jakarta Selatan</h3>
  <div class="value" id="js">0</div>
</div>

<div class="card">
  <h3>Jakarta Timur</h3>
  <div class="value" id="jt">0</div>
</div>

<div class="card">
  <h3>Jakarta Utara</h3>
  <div class="value" id="ju">0</div>
</div>

<div class="card">
  <h3>Korban / Meninggal</h3>
  <div class="value" id="korban">0</div>
</div>

<div class="card">
  <h3>Jumlah Pasien (Sakit)</h3>
  <div class="value" id="pasien">0</div>
</div>

<div class="card">
  <h3>Jumlah Terdampak</h3>
  <div class="sub">Rumah</div>
  <div class="value" id="rumah">0</div>
  <div class="sub">KK</div>
  <div class="value" id="kk">0</div>
  <div class="sub">Orang</div>
  <div class="value" id="orang">0</div>
</div>

<div class="card">
  <h3>Jumlah Pengungsian</h3>
  <div class="sub">Total</div>
  <div class="value" id="pengTotal">0</div>
  <div class="sub">Laki-laki</div>
  <div class="value" id="pengL">0</div>
  <div class="sub">Perempuan</div>
  <div class="value" id="pengP">0</div>
</div>

</div>

<div class="footer">
  Dashboard Kebakaran • Google Sheets • GitHub Pages
</div>

</div>

<script>
const SHEET_ID="1PU8hf7BEu142XSi0QjCMDgPsD6KaSFET";

const GID_BULAN={
  1:"1241106342", // JANUARI
  2:"1284284298"  // FEBRUARI
  // bulan lain belum ada
};

function n(v){
 if(v===null||v===undefined) return 0;
 const x=parseInt(v.toString().replace(/\D/g,""));
 return isNaN(x)?0:x;
}

function reset(){
 ["total","jb","jp","js","jt","ju","korban","pasien",
  "rumah","kk","orang","pengTotal","pengL","pengP"]
 .forEach(id=>document.getElementById(id).textContent=0);
}

function loadData(bulan){
 reset();
 if(!GID_BULAN[bulan]) return;

 const url=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?gid=${GID_BULAN[bulan]}&tqx=out:json`;

 fetch(url)
 .then(r=>r.text())
 .then(t=>{
  const json=JSON.parse(t.substring(47,t.length-2));
  json.table.rows.forEach(r=>{
   const c=r.c.map(x=>x?x.v:"");
   if(!(c[3]||"").toLowerCase().includes("kebakaran")) return;

   total.textContent++;
   const kota=(c[7]||"").toLowerCase();
   if(kota.includes("barat")) jb.textContent++;
   else if(kota.includes("pusat")) jp.textContent++;
   else if(kota.includes("selatan")) js.textContent++;
   else if(kota.includes("timur")) jt.textContent++;
   else if(kota.includes("utara")) ju.textContent++;

   korban.textContent=n(korban.textContent)+n(c[9]);
   pasien.textContent=n(pasien.textContent)+n(c[11]);

   rumah.textContent=n(rumah.textContent)+n(c[12]);
   kk.textContent=n(kk.textContent)+n(c[13]);
   orang.textContent=n(orang.textContent)+n(c[14]);

   pengTotal.textContent=n(pengTotal.textContent)+n(c[15]);
   pengL.textContent=n(pengL.textContent)+n(c[16]);
   pengP.textContent=n(pengP.textContent)+n(c[17]);
  });
 });
}

loadData(1);
</script>

</body>
</html>
