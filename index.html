<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Rekap Kebakaran per Wilayah</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
body{
  font-family:Segoe UI,Arial;
  background:#0f1115;
  color:#eaeaea;
  margin:20px;
}
h1{color:#ff6b6b}

.dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:14px;
  margin-top:20px;
}

.card{
  background:#161a24;
  border-radius:14px;
  padding:16px;
  box-shadow:0 8px 20px rgba(0,0,0,.45);
  text-align:center;
}
.card h2{
  margin:0;
  font-size:14px;
  color:#aaa;
}
.card .count{
  font-size:42px;
  font-weight:800;
  margin-top:6px;
}
</style>
</head>

<body>

<h1>ðŸ”¥ Rekap Kebakaran per Wilayah</h1>
<p>Data otomatis dari seluruh sheet Google Spreadsheet</p>

<div class="dashboard">
  <div class="card"><h2>Jakarta Barat</h2><div class="count" id="jb">0</div></div>
  <div class="card"><h2>Jakarta Pusat</h2><div class="count" id="jp">0</div></div>
  <div class="card"><h2>Jakarta Selatan</h2><div class="count" id="js">0</div></div>
  <div class="card"><h2>Jakarta Timur</h2><div class="count" id="jt">0</div></div>
  <div class="card"><h2>Jakarta Utara</h2><div class="count" id="ju">0</div></div>
  <div class="card"><h2>Kepulauan Seribu</h2><div class="count" id="ks">0</div></div>
  <div class="card"><h2>TOTAL</h2><div class="count" id="total">0</div></div>
</div>

<script>
const CSV_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vS4JZD0cxRHeBcSJm0KZMXewwX19RWJL1GrNcn2ZQeyeQpVByaiIyt0_FCPEcaRMA/pub?output=csv";

Papa.parse(CSV_URL,{
  download:true,
  skipEmptyLines:true,
  complete:(res)=>{
    hitung(res.data.slice(1));
  }
});

function hitung(rows){
  const count={
    "Jakarta Barat":0,
    "Jakarta Pusat":0,
    "Jakarta Selatan":0,
    "Jakarta Timur":0,
    "Jakarta Utara":0,
    "Kepulauan Seribu":0
  };

  let total=0;

  rows.forEach(r=>{
    const jenis=(r[3]||"").toLowerCase();
    if(!jenis.includes("kebakaran")) return;

    const kota=r[7] || "";
    if(count[kota]!==undefined){
      count[kota]++;
      total++;
    }
  });

  document.getElementById("jb").innerText=count["Jakarta Barat"];
  document.getElementById("jp").innerText=count["Jakarta Pusat"];
  document.getElementById("js").innerText=count["Jakarta Selatan"];
  document.getElementById("jt").innerText=count["Jakarta Timur"];
  document.getElementById("ju").innerText=count["Jakarta Utara"];
  document.getElementById("ks").innerText=count["Kepulauan Seribu"];
  document.getElementById("total").innerText=total;
}
</script>

</body>
</html>
