<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard Kebakaran 2026</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#061021;
  color:white;
}
h1{
  padding:20px;
}
.bulan{
  margin:0 20px 20px;
}
.bulan button{
  padding:8px 15px;
  margin-right:5px;
  border-radius:20px;
  border:none;
  cursor:pointer;
}
.active{
  background:#ff4d4d;
  color:white;
}
.card-container{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  padding:20px;
}
.card{
  background:#0e1c34;
  padding:20px;
  border-radius:10px;
  min-width:150px;
  text-align:center;
  flex:1;
}
.card h3{
  margin:0;
}
.card span{
  font-size:24px;
  font-weight:bold;
}
.section-title{
  padding:0 20px;
  margin-top:20px;
  font-weight:bold;
}
</style>
</head>

<body>

<h1>ðŸ”¥ DATA KEBAKARAN 2026</h1>

<div class="bulan">
  <button onclick="loadBulan(0)" id="btn0" class="active">Jan</button>
  <button onclick="loadBulan(1)" id="btn1">Feb</button>
</div>

<div class="card-container">
  <div class="card"><h3>Jakbar</h3><span id="jakbar">0</span></div>
  <div class="card"><h3>Jakpus</h3><span id="jakpus">0</span></div>
  <div class="card"><h3>Jaksel</h3><span id="jaksel">0</span></div>
  <div class="card"><h3>Jaktim</h3><span id="jaktim">0</span></div>
  <div class="card"><h3>Jakut</h3><span id="jakut">0</span></div>
  <div class="card"><h3>Total</h3><span id="total">0</span></div>
</div>

<div class="section-title">Jumlah Terdampak</div>
<div class="card-container">
  <div class="card"><h3>Rumah</h3><span id="rumah">0</span></div>
  <div class="card"><h3>KK</h3><span id="kk">0</span></div>
  <div class="card"><h3>Orang</h3><span id="orang">0</span></div>
</div>

<div class="section-title">Korban / Meninggal</div>
<div class="card-container">
  <div class="card"><h3>Meninggal</h3><span id="meninggal">0</span></div>
  <div class="card"><h3>Pasien (Sakit)</h3><span id="sakit">0</span></div>
</div>

<div class="section-title">Jumlah Pengungsian</div>
<div class="card-container">
  <div class="card"><h3>Laki-Laki</h3><span id="laki">0</span></div>
  <div class="card"><h3>Perempuan</h3><span id="perempuan">0</span></div>
  <div class="card"><h3>Total</h3><span id="totalPengungsi">0</span></div>
</div>

<script>

const SHEET_ID = "1PU8hf7BEu142XSi0QjCMDgPsD6KaSFET";

const GID = [
  "1241106342", // Januari
  "1284284298"  // Februari
];

function reset(){
  document.querySelectorAll("span").forEach(e=>e.innerText=0);
}

function num(val){
  return parseInt(String(val||"0").replace(/[^0-9]/g,''))||0;
}

function loadBulan(index){

  document.querySelectorAll(".bulan button").forEach(b=>b.classList.remove("active"));
  document.getElementById("btn"+index).classList.add("active");

  reset();

  const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv&gid=${GID[index]}`;

  Papa.parse(url,{
    download:true,
    header:true,
    skipEmptyLines:true,
    complete:function(res){

      let jakbar=0,jakpus=0,jaksel=0,jaktim=0,jakut=0;

      let rumah=0,kk=0,orang=0;
      let meninggal=0,sakit=0;
      let laki=0,perempuan=0,totalPengungsi=0;

      res.data.forEach(r=>{

        const kota=(r["Kota"]||"").toLowerCase();

        if(kota.includes("barat")) jakbar++;
        if(kota.includes("pusat")) jakpus++;
        if(kota.includes("selatan")) jaksel++;
        if(kota.includes("timur")) jaktim++;
        if(kota.includes("utara")) jakut++;

        rumah+=num(r["Jumlah Rumah"]);
        kk+=num(r["Jumlah KK"]);
        orang+=num(r["Jumlah Orang"]);

        meninggal+=num(r["Jumlah Korban / Meninggal"]);
        sakit+=num(r["Jumlah Sakit"]);

        laki+=num(r["Jumlah Laki-Laki"]);
        perempuan+=num(r["Jumlah Perempuan"]);
        totalPengungsi+=num(r["Jumlah Total"]);

      });

      document.getElementById("jakbar").innerText=jakbar;
      document.getElementById("jakpus").innerText=jakpus;
      document.getElementById("jaksel").innerText=jaksel;
      document.getElementById("jaktim").innerText=jaktim;
      document.getElementById("jakut").innerText=jakut;
      document.getElementById("total").innerText=jakbar+jakpus+jaksel+jaktim+jakut;

      document.getElementById("rumah").innerText=rumah;
      document.getElementById("kk").innerText=kk;
      document.getElementById("orang").innerText=orang;

      document.getElementById("meninggal").innerText=meninggal;
      document.getElementById("sakit").innerText=sakit;

      document.getElementById("laki").innerText=laki;
      document.getElementById("perempuan").innerText=perempuan;
      document.getElementById("totalPengungsi").innerText=totalPengungsi;

    }
  });
}

loadBulan(0);

</script>

</body>
</html>
